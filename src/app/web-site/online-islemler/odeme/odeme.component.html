<div class="row">
    <div class="col">
        <div class="card">
            <h5 class="card-header">Kart Bilgileri</h5>
            <div class="card-body">
                <form #form="ngForm" novalidate>
                    <div class="dx-field">
                        <div class="dx-field-label">Ad Soyad</div>
                        <div class="dx-field-value">
                            <dx-text-box name="cardHolderName" required [(ngModel)]="model.cardHolderName">
                                <dx-validator>
                                    <dxi-validation-rule type="required" message="Ad Soyad zorunludur">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label">Kart No</div>
                        <div class="dx-field-value">
                            <dx-text-box name="cardNumber" required [(ngModel)]="model.cardNumber">
                                <dx-validator>
                                    <dxi-validation-rule type="required" message="Kart No zorunludur">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label">Ay</div>
                        <div class="dx-field-value">
                            <dx-select-box name="cardExpireDateMonth" required [(ngModel)]="model.cardExpireDateMonth"
                                [dataSource]="aylar" displayExpr="ad" valueExpr="id">
                                <dx-validator>
                                    <dxi-validation-rule type="required" message="Ay zorunludur">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-select-box>
                        </div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label">Yıl</div>
                        <div class="dx-field-value">
                            <dx-select-box name="cardExpireDateYear" required [(ngModel)]="model.cardExpireDateYear"
                                [dataSource]="yillar" displayExpr="ad" valueExpr="id">
                                <dx-validator>
                                    <dxi-validation-rule type="required" message="Yıl zorunludur">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-select-box>
                        </div>
                    </div>
                    <div class="dx-field">
                        <div class="dx-field-label">CVV Kodu</div>
                        <div class="dx-field-value">
                            <dx-text-box name="cardCVV2" required [(ngModel)]="model.cardCVV2">
                                <dx-validator>
                                    <dxi-validation-rule type="required" message="CVV Kodu zorunludur">
                                    </dxi-validation-rule>
                                </dx-validator>
                            </dx-text-box>
                        </div>
                    </div>
                    <dx-button [disabled]="form.invalid" stylingMode="contained" text="Ödemeyi Tamamla" type="success"
                        (onClick)="odemeyiTamamla($event)">
                    </dx-button>
                </form>
            </div>
        </div>
    </div>
    <div class="col" *ngIf="seciliTahakkuklar && seciliTahakkuklar.length">
        <div class="card">
            <h5 class="card-header">Ödeme Bilgileri</h5>
            <div class="card-body">
                <table class="table">
                    <thead>
                        <tr>
                            <th>
                                Ödeme Tipi
                            </th>
                            <th>
                                Vade Tarihi
                            </th>
                            <th class="text-right">
                                Ödenecek Tutar
                            </th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let row of seciliTahakkuklar">
                            <td>
                                {{row.odemeTipiId}}
                            </td>
                            <td>
                                {{row.vadeTarihi|date}}
                            </td>
                            <td class="text-right">
                                {{row.kalanTutar|currency}}
                            </td>
                        </tr>
                    </tbody>
                    <tfoot>
                        <tr>
                            <td colspan="2"><b> Faiz:</b></td>
                            <td class="text-right"><b> {{ (seciliTahakkuklar|sum:'faiz')|currency}}</b>
                            </td>
                        </tr>
                        <tr>
                            <td colspan="2"><b> Banka Komisyonu:</b></td>
                            <td class="text-right"><b> </b></td>
                        </tr>

                        <tr>
                            <td colspan="2"><b> Toplam:</b></td>
                            <td class="text-right"><b>
                                    {{ ((seciliTahakkuklar|sum:'faiz') + (seciliTahakkuklar|sum:'kalanTutar'))|currency}}</b>
                            </td>
                        </tr>
                    </tfoot>
                </table>
            </div>
        </div>
    </div>
</div>